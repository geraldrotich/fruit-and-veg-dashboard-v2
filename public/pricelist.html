<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fruit & Veg Pricelist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .tabs { display: flex; gap: 20px; margin-bottom: 20px; }
    .tab { padding: 10px 20px; border-radius: 6px; background: #f0f0f0; cursor: pointer; }
    .tab.active { background: #008800; color: white; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    input, select { padding: 8px; margin-bottom: 10px; width: 100%; }
    button { padding: 10px 20px; background: #008800; color: white; border: none; border-radius: 4px; cursor: pointer; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { padding: 8px; border: 1px solid #ccc; }
    tr:hover { background: #f9f9f9; cursor: pointer; }
  </style>
</head>
<body>

  <h1>Pricelist Management</h1>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('products')">Products</div>
    <div class="tab" onclick="switchTab('vendors')">Vendors</div>
    <div class="tab" onclick="switchTab('add')">Add New</div>
  </div>

  <div id="products" class="tab-content active">
    <h2>Products</h2>
    <div id="productList"></div>
    <div id="productDetails"></div>
  </div>

  <div id="vendors" class="tab-content">
    <h2>Vendors</h2>
    <div id="vendorList"></div>
    <div id="vendorDetails"></div>
  </div>

  <div id="add" class="tab-content">
    <h2>Add Product</h2>
    <input id="productName" placeholder="Product name">
    <input id="productUnit" placeholder="Unit (e.g. kg)">
    <select id="productType">
      <option value="organic">Organic</option>
      <option value="conventional">Conventional</option>
      <option value="imported">Imported</option>
    </select>
    <button onclick="addProduct()">Add Product</button>

    <h2 style="margin-top: 30px;">Add Vendor</h2>
    <input id="vendorName" placeholder="Vendor name">
    <input id="vendorContact" placeholder="Contact">
    <button onclick="addVendor()">Add Vendor</button>

    <h2 style="margin-top: 30px;">Link Vendor to Product</h2>
    <select id="linkVendor"></select>
    <select id="linkProduct"></select>
    <input id="linkUnit" placeholder="Unit (e.g. kg)">
    <input id="linkPrice" placeholder="Price">
    <button onclick="linkVendorProduct()">Link</button>
  </div>

  <script>
    const products = []
    const vendors = []
    const vendorProducts = []

    function switchTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'))
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'))
      document.querySelector(`.tab[onclick*="${id}"]`).classList.add('active')
      document.getElementById(id).classList.add('active')
    }

    function addProduct() {
      const name = document.getElementById('productName').value
      const unit = document.getElementById('productUnit').value
      const type = document.getElementById('productType').value
      const id = `prod-${Date.now()}`
      products.push({ id, name, unit, type })
      renderProducts()
      updateDropdowns()
      alert('Product added!')
    }

    function addVendor() {
      const name = document.getElementById('vendorName').value
      const contact = document.getElementById('vendorContact').value
      const id = `vend-${Date.now()}`
      vendors.push({ id, name, contact })
      renderVendors()
      updateDropdowns()
      alert('Vendor added!')
    }

    function linkVendorProduct() {
      const vendorId = document.getElementById('linkVendor').value
      const productId = document.getElementById('linkProduct').value
      const unit = document.getElementById('linkUnit').value
      const price = document.getElementById('linkPrice').value
      vendorProducts.push({ vendorId, productId, unit, price })
      alert('Linked successfully!')
    }

    function updateDropdowns() {
      const vSel = document.getElementById('linkVendor')
      const pSel = document.getElementById('linkProduct')
      vSel.innerHTML = vendors.map(v => `<option value="${v.id}">${v.name}</option>`).join('')
      pSel.innerHTML = products.map(p => `<option value="${p.id}">${p.name}</option>`).join('')
    }

    function renderProducts() {
      const list = document.getElementById('productList')
      list.innerHTML = `<table>
        <tr><th>Product</th><th>Unit</th><th>Type</th></tr>
        ${products.map(p => `
          <tr onclick="showProductDetails('${p.id}')">
            <td>${p.name}</td>
            <td>${p.unit}</td>
            <td>${p.type}</td>
          </tr>
        `).join('')}
      </table>`
    }

    function renderVendors() {
      const list = document.getElementById('vendorList')
      list.innerHTML = `<table>
        <tr><th>Vendor</th><th>Contact</th></tr>
        ${vendors.map(v => `
          <tr onclick="showVendorDetails('${v.id}')">
            <td>${v.name}</td>
            <td>${v.contact}</td>
          </tr>
        `).join('')}
      </table>`
    }

    function showProductDetails(productId) {
      const detail = vendorProducts
        .filter(vp => vp.productId === productId)
        .map(vp => {
          const vendor = vendors.find(v => v.id === vp.vendorId)
          return `<tr><td>${vendor.name}</td><td>${vp.unit}</td><td>${vp.price}</td></tr>`
        }).join('')
      document.getElementById('productDetails').innerHTML = `
        <h3>Vendors for this product</h3>
        <table>
          <tr><th>Vendor</th><th>Unit</th><th>Price</th></tr>
          ${detail || '<tr><td colspan="3">No vendors yet.</td></tr>'}
        </table>`
    }

    function showVendorDetails(vendorId) {
      const detail = vendorProducts
        .filter(vp => vp.vendorId === vendorId)
        .map(vp => {
          const product = products.find(p => p.id === vp.productId)
          return `<tr><td>${product.name}</td><td>${vp.unit}</td><td>${vp.price}</td></tr>`
        }).join('')
      document.getElementById('vendorDetails').innerHTML = `
        <h3>Products sold by this vendor</h3>
        <table>
          <tr><th>Product</th><th>Unit</th><th>Price</th></tr>
          ${detail || '<tr><td colspan="3">No products yet.</td></tr>'}
        </table>`
    }
  </script>

</body>
</html>
